(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"+iuc":function(e,t,r){r("wgeU"),r("FlQf"),r("bBy9"),r("B9jh"),r("dL40"),r("xvv9"),r("V+O7"),e.exports=r("WEpk").Set},"/0+H":function(e,t,r){"use strict";var n=r("hfKm"),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};n(t,"__esModule",{value:!0});var a=i(r("q1tI")),o=r("lwAK");function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ampFirst,r=void 0!==t&&t,n=e.hybrid,i=void 0!==n&&n,a=e.hasQuery;return r||i&&(void 0!==a&&a)}t.isInAmpMode=l,t.useAmp=function(){return l(a.default.useContext(o.AmpStateContext))}},"0tVQ":function(e,t,r){r("FlQf"),r("VJsP"),e.exports=r("WEpk").Array.from},"2PDY":function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},"3niX":function(e,t,r){"use strict";t.__esModule=!0,t.flush=function(){var e=a.cssRules();return a.flush(),e},t.default=void 0;var n,i=r("q1tI");var a=new(((n=r("SevZ"))&&n.__esModule?n:{default:n}).default),o=function(e){var t,r;function n(t){var r;return(r=e.call(this,t)||this).prevProps={},r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.dynamic=function(e){return e.map((function(e){var t=e[0],r=e[1];return a.computeId(t,r)})).join(" ")};var i=n.prototype;return i.shouldComponentUpdate=function(e){return this.props.id!==e.id||String(this.props.dynamic)!==String(e.dynamic)},i.componentWillUnmount=function(){a.remove(this.props)},i.render=function(){return this.shouldComponentUpdate(this.prevProps)&&(this.prevProps.id&&a.remove(this.prevProps),a.add(this.props),this.prevProps=this.props),null},n}(i.Component);t.default=o},"8Kt/":function(e,t,r){"use strict";var n=r("ttDY"),i=r("hfKm"),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};i(t,"__esModule",{value:!0});var o=a(r("q1tI")),l=a(r("Xuae")),s=r("lwAK"),c=r("FYa8"),u=r("/0+H");function f(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[o.default.createElement("meta",{charSet:"utf-8"})];return e||t.push(o.default.createElement("meta",{name:"viewport",content:"width=device-width,minimum-scale=1,initial-scale=1"})),t}function h(e,t){return"string"===typeof t||"number"===typeof t?e:t.type===o.default.Fragment?e.concat(o.default.Children.toArray(t.props.children).reduce((function(e,t){return"string"===typeof t||"number"===typeof t?e:e.concat(t)}),[])):e.concat(t)}t.defaultHead=f;var d=["name","httpEquiv","charSet","itemProp"];function v(e,t){return e.reduce((function(e,t){var r=o.default.Children.toArray(t.props.children);return e.concat(r)}),[]).reduce(h,[]).reverse().concat(f(t.inAmpMode)).filter(function(){var e=new n,t=new n,r=new n,i={};return function(a){var o=!0;if(a.key&&"number"!==typeof a.key&&a.key.indexOf("$")>0){var l=a.key.slice(a.key.indexOf("$")+1);e.has(l)?o=!1:e.add(l)}switch(a.type){case"title":case"base":t.has(a.type)?o=!1:t.add(a.type);break;case"meta":for(var s=0,c=d.length;s<c;s++){var u=d[s];if(a.props.hasOwnProperty(u))if("charSet"===u)r.has(u)?o=!1:r.add(u);else{var f=a.props[u],h=i[u]||new n;h.has(f)?o=!1:(h.add(f),i[u]=h)}}}return o}}()).reverse().map((function(e,t){var r=e.key||t;return o.default.cloneElement(e,{key:r})}))}var p=l.default();function m(e){var t=e.children;return o.default.createElement(s.AmpStateContext.Consumer,null,(function(e){return o.default.createElement(c.HeadManagerContext.Consumer,null,(function(r){return o.default.createElement(p,{reduceComponentsToState:v,handleStateChange:r,inAmpMode:u.isInAmpMode(e)},t)}))}))}m.rewind=p.rewind,t.default=m},"8iia":function(e,t,r){var n=r("QMMT"),i=r("RRc/");e.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},"8oxB":function(e,t){var r,n,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function l(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"===typeof setTimeout?setTimeout:a}catch(e){r=a}try{n="function"===typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var s,c=[],u=!1,f=-1;function h(){u&&s&&(u=!1,s.length?c=s.concat(c):f=-1,c.length&&d())}function d(){if(!u){var e=l(h);u=!0;for(var t=c.length;t;){for(s=c,c=[];++f<t;)s&&s[f].run();f=-1,t=c.length}s=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new v(e,t)),1!==c.length||u||l(d)},v.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},"9kyW":function(e,t,r){"use strict";e.exports=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0}},B9jh:function(e,t,r){"use strict";var n=r("Wu5q"),i=r("n3ko");e.exports=r("raTm")("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return n.def(i(this,"Set"),e=0===e?0:e,e)}},n)},IP1Z:function(e,t,r){"use strict";var n=r("2faE"),i=r("rr1i");e.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},MX0m:function(e,t,r){e.exports=r("3niX")},PQJW:function(e,t,r){var n=r("d04V"),i=r("yLu3");e.exports=function(e){if(i(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return n(e)}},RNiq:function(e,t,r){"use strict";r.r(t);var n=r("XXOK"),i=r.n(n),a=r("p0XB"),o=r.n(a);var l=r("yLu3"),s=r.n(l);function c(e,t){return function(e){if(o()(e))return e}(e)||function(e,t){if(s()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,a=!1,o=void 0;try{for(var l,c=i()(e);!(n=(l=c.next()).done)&&(r.push(l.value),!t||r.length!==t);n=!0);}catch(u){a=!0,o=u}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var u=r("d04V"),f=r.n(u);function h(e){return function(e){if(o()(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(s()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return f()(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var d=r("MX0m"),v=r.n(d),p=r("q1tI"),m=r.n(p),g=r("8Kt/"),y=r.n(g);function b(e,t){for(var r=[],n=0,i=0,a=t.split("\n").map((function(e,t){for(var r=e.split(" "),n=[],i=0;i<r.length;i++){var a=r[i];n.push(a)}return n.map((function(e){return e.split("")}))})),o=0,l=0;l<a.length;l++){for(var s=a[l],c=0;c<s.length;c++){var u=s[c];if(n+u.length>e&&0!==n&&(n=0,i++),u.length>e)for(var f=0,h=0;h<u.length;h++)f%e===0&&0!==f&&(n=0,i++),r.push([u[h],n,i,o]),f++,n++,o++;else for(var d=0;d<u.length;d++)r.push([u[d],n,i,o]),n++,o++;c!==s.length-1&&(r.push([" ",n,i,o]),n++,o++)}l!==a.length-1&&(r.push(["\n",n,i,o]),n=0,i++,o++)}return r}var A="data:image/png;base64,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",w=m.a.createElement,x=12,_=8,k=16;function S(e,t,r,n){var a=Math.floor(t.width/r),o=[],l=0,s=0;function c(e){var t=e.key_label,r=e.label,n=e.key,i=t.length+0+r.length;l+i>a&&(l=0,s+=1),o.push([t,l+.5,s,!0,n,l,s,l+t.length+1,s+1]),l=l+t.length+1,o.push([r,l,s,!1,n,l,s,l+r.length+1,s+1]),l=l+r.length+1}var u,f=!0,h=!1,d=void 0;try{for(var v,p=i()(e);!(f=(v=p.next()).done);f=!0){var m=v.value;"button"===m.type?c(m):(u=m.content,l+u.length>a&&(l=0,s+=1),o.push([u,l,s]),l+=u.length)}}catch(g){h=!0,d=g}finally{try{f||null==p.return||p.return()}finally{if(h)throw d}}return o}var j=[{type:"text",content:"font mode:"},{type:"button",key:"h",key_label:"h",label:"left"},{type:"button",key:"j",key_label:"j",label:"down"},{type:"button",key:"k",key_label:"k",label:"up"},{type:"button",key:"l",key_label:"l",label:"right"},{type:"button",key:"Enter",key_label:"enter",label:"edit char"},{type:"button",key:"t",key_label:"t",label:"text mode"}],C={font:j,text:[{type:"text",content:"text mode:"},{type:"button",key:"Escape",key_label:"esc",label:"font mode"}],char:[{type:"text",content:"char mode:"},{type:"button",key:"h",key_label:"h",label:"left"},{type:"button",key:"j",key_label:"j",label:"down"},{type:"button",key:"k",key_label:"k",label:"up"},{type:"button",key:"l",key_label:"l",label:"right"},{type:"button",key:"d",key_label:"d",label:"draw"},{type:"button",key:"e",key_label:"e",label:"erase"},{type:"button",key:"Escape",key_label:"esc",label:"font mode"}]},E=function(e){var t=e.cw,r=e.ch,n=e.base,a=e.ui_loaded,o=e.mode,l=e.keyTrigger,s=Object(p.useRef)(null),u=Object(p.useState)(j),f=u[0],d=u[1],v=Object(p.useRef)(null);return Object(p.useEffect)((function(){var e=s.current;e.width=window.innerWidth;var n=S(f,e,t);e.height=n[n.length-1][2]*r+r}),[]),Object(p.useEffect)((function(){d(C[o])}),[o]),Object(p.useEffect)((function(){if(a){var e=s.current,o=S(f,e,t);e.height=o[o.length-1][2]*r+r;var l=e.getContext("2d"),u=(Math.floor(e.width/t),function(e,t,r,n){return function(i,a,o,l){t.globalCompositeOperation="source-over",t.fillStyle="#efefef",t.fillRect(a*r,0,i.length*r,n),t.globalCompositeOperation="darken";for(var s=a;s<a+i.length;s++){var c=i[s-a].charCodeAt(0)-32;-22===c&&(c=1);var u=c%x,f=Math.floor(c/x);l&&(t.filter="invert(1)"),t.drawImage(e,u*r,f*n,r,n,s*r,o*n,r,n),t.filter="invert(0)"}}}(n,l,t,r));v.current=[];var d=!0,p=!1,m=void 0;try{for(var g,y=i()(o);!(d=(g=y.next()).done);d=!0){var b=g.value,A=c(b,4),w=A[0],_=A[1],k=A[2],j=A[3];v.current.push(b),l.fillStyle="#222",j&&l.fillRect(_*t-t/2,k*r,w.length*t+t,r),u.apply(void 0,h(b))}}catch(C){p=!0,m=C}finally{try{d||null==y.return||y.return()}finally{if(p)throw m}}}}),[a,f]),w("canvas",{onClick:function(e){var t=v.current.filter((function(t){return t[5]*_<=e.clientX&&t[6]*k<=e.clientY&&t[7]*_>=e.clientX&&t[8]*k>=e.clientY}));t.length>0&&l(t[0][4])},ref:s})},R=m.a.createElement,O=12,B=8,I=16;function M(e,t,r,n){var a=Math.floor(t.width/r),o=[],l=0,s=0;function c(e){var t=e.key_label,r=e.label,n=e.key,i=t.length+0+r.length;l+i>a&&(l=0,s+=1),o.push([t,l+.5,s,!0,n,l,s,l+t.length+1,s+1]),l=l+t.length+1,o.push([r,l,s,!1,n,l,s,l+r.length+1,s+1]),l=l+r.length+1}var u,f=!0,h=!1,d=void 0;try{for(var v,p=i()(e);!(f=(v=p.next()).done);f=!0){var m=v.value;"button"===m.type?c(m):(u=m.content,l+u.length>a&&(l=0,s+=1),o.push([u,l,s]),l+=u.length)}}catch(g){h=!0,d=g}finally{try{f||null==p.return||p.return()}finally{if(h)throw d}}return o}var D=[{type:"button",key:"ctrl+h",key_label:"ctrl+h",label:"columns-1"},{type:"button",key:"ctrl+l",key_label:"ctrl+l",label:"columns+1"},{type:"button",key:"ctrl+1",key_label:"ctrl+1",label:"size/2"},{type:"button",key:"ctrl+s",key_label:"ctrl+s",label:"save text as image"},{type:"button",key:"ctrl+v",key_label:"ctrl+v",label:"view source"}],N=[{type:"button",key:"ctrl+m",key_label:"ctrl+m",label:"highlights off"},{type:"button",key:"ctrl+1",key_label:"ctrl+1",label:"size/2"},{type:"button",key:"ctrl+d",key_label:"ctrl+d",label:"save font"},{type:"button",key:"ctrl+f",key_label:"ctrl+f",label:"load font"},{type:"button",key:"ctrl+g",key_label:"ctrl+g",label:"font gallery"},{type:"button",key:"ctrl+v",key_label:"ctrl+v",label:"view source"}],F=function(e){var t=e.cw,r=e.ch,n=e.base,a=e.ui_loaded,o=e.mode,l=e.highlight,s=e.scale,u=e.keyTrigger,f=Object(p.useRef)(null),d=Object(p.useState)(D),v=d[0],m=d[1],g=Object(p.useRef)(null);return Object(p.useEffect)((function(){var e=f.current;e.width=window.innerWidth;var n=M(v,e,t);e.height=n[n.length-1][2]*r+r}),[]),Object(p.useEffect)((function(){if("font"===o||"char"===o){var e=N.slice();e[0].label=l?"highlights off":"highlights on",1==s?(e[1].key_label="ctrl+2",e[1].label="size*2",e[1].key="ctrl+2"):(e[1].key_label="ctrl+1",e[1].label="size/2",e[1].key="ctrl+1"),m(e)}else{var t=D.slice();1==s?(t[2].key_label="ctrl+2",t[2].label="size*2",t[2].key="ctrl+2"):(t[2].key_label="ctrl+1",t[2].label="size/2",t[2].key="ctrl+1"),m(t)}}),[o,l,s]),Object(p.useEffect)((function(){if(a){var e=f.current,o=M(v,e,t);e.height=o[o.length-1][2]*r+r;var l=e.getContext("2d"),s=(Math.floor(e.width/t),function(e,t,r,n){return function(i,a,o,l){t.globalCompositeOperation="source-over",t.fillStyle="#efefef",t.fillRect(a*r,o*n,i.length*r,o*n+n),t.globalCompositeOperation="darken";for(var s=a;s<a+i.length;s++){var c=i[s-a].charCodeAt(0)-32;-22===c&&(c=1);var u=c%O,f=Math.floor(c/O);l&&(t.filter="invert(1)"),t.drawImage(e,u*r,f*n,r,n,s*r,o*n,r,n),t.filter="invert(0)"}}}(n,l,t,r));g.current=[];var u=!0,d=!1,p=void 0;try{for(var m,y=i()(o);!(u=(m=y.next()).done);u=!0){var b=m.value,A=c(b,4),w=A[0],x=A[1],_=A[2],k=A[3];g.current.push(b),l.fillStyle="#222",k&&l.fillRect(x*t-t/2,_*r,w.length*t+t,r),s.apply(void 0,h(b))}}catch(S){d=!0,p=S}finally{try{u||null==y.return||y.return()}finally{if(d)throw p}}}}),[a,v]),R("canvas",{onClick:function(e){var t=g.current.filter((function(t){return t[5]*B<=e.clientX&&t[6]*I<=e.clientY-e.target.offsetTop&&t[7]*B>=e.clientX&&t[8]*I>=e.clientY-e.target.offsetTop}));t.length>0&&u(t[0][4])},ref:f,style:{position:"fixed",left:0,bottom:0}})},T=m.a.createElement,L=12;var P=function(e){var t=e.base,r=e.content,n=e.ui_loaded,a=(e.keyTrigger,e.max_width),o=Object(p.useRef)(null),l=Object(p.useRef)(null);return Object(p.useEffect)((function(){if(n){var e=o.current;e.width=a;var s=function(e,t,r,n){var a=Math.floor(t.width/r),o=[],l=0,s=0;function c(e){var t=e.key_label,r=e.label,n=e.key,i=t.length+0+r.length;l+i>a&&(l=0,s+=1),o.push([t,l+.5,s,!0,n,l,s,l+t.length+1,s+1]),l=l+t.length+1,o.push([r,l,s,!1,n,l,s,l+r.length+1,s+1]),l=l+r.length+1}var u,f=!0,h=!1,d=void 0;try{for(var v,p=i()(e);!(f=(v=p.next()).done);f=!0){var m=v.value;"button"===m.type?c(m):(u=m.content,l+u.length>a&&(l=0,s+=1),o.push([u,l,s]),l+=u.length)}}catch(g){h=!0,d=g}finally{try{f||null==p.return||p.return()}finally{if(h)throw d}}return o}(r,e,8);e.height=16*s[s.length-1][2]+16;var u=e.getContext("2d"),f=(Math.floor(e.width/8),function(e,t,r,n){return function(i,a,o,l){t.globalCompositeOperation="source-over",t.fillStyle="#efefef",t.fillRect(a*r,0,i.length*r,n),t.globalCompositeOperation="darken";for(var s=a;s<a+i.length;s++){var c=i[s-a].charCodeAt(0)-32;-22===c&&(c=1);var u=c%L,f=Math.floor(c/L);l&&(t.filter="invert(1)"),t.drawImage(e,u*r,f*n,r,n,s*r,o*n,r,n),t.filter="invert(0)"}}}(t,u,8,16));l.current=[];var d=!0,v=!1,p=void 0;try{for(var m,g=i()(s);!(d=(m=g.next()).done);d=!0){var y=m.value,b=c(y,4),A=b[0],w=b[1],x=b[2],_=b[3];l.current.push(y),u.fillStyle="#222",_&&u.fillRect(8*w-4,16*x,8*A.length+8,16),f.apply(void 0,h(y))}}catch(k){v=!0,p=k}finally{try{d||null==g.return||g.return()}finally{if(v)throw p}}}}),[n]),T("canvas",{ref:o})},W=m.a.createElement,X=8,z=16,Q="abcdefghijklmnopqrstuvwxyz0123456789".split("");function U(e,t){var r=e[t];if(void 0===r){var n=e[t-1];void 0===n?r=[null,0,0]:"\n"===(r=n.slice())[0]?(r[1]=0,r[2]+=1):r[1]+=1}return r}function H(e,t){function r(e,t){return t.map((function(t){return Math.min(Math.max(0,t),e.length)}))}switch(t.type){case"insert":var n=t.payload,i=e.text.map((function(e){return e[0]})).join(""),a=Math.min.apply(Math,h(e.marker)),o=Math.max.apply(Math,h(e.marker)),l=i.slice(0,Math.max(0,a))+n+i.slice(o),s=b(t.col_num,l);return{text:s,marker:r(s,[a+n.length,a+n.length])};case"backspace":var c,u,f=e.text.map((function(e){return e[0]})).join("");if(e.marker[0]===e.marker[1])c=f.slice(0,Math.max(0,e.marker[0]-1))+f.slice(e.marker[0]),u=[e.marker[0]-1,e.marker[0]-1];else{var d=Math.min.apply(Math,h(e.marker)),v=Math.max.apply(Math,h(e.marker));c=f.slice(0,Math.max(0,d))+f.slice(v),u=[d,d]}var p=b(t.col_num,c);return{text:p,marker:r(p,u)};case"highlight":var m=e.marker;if(0!=t.payload[0]&&(m=[e.marker[0],e.marker[1]+t.payload[0]]),0!=t.payload[1]){var g=e.marker[1],y=U(e.text,g);if(t.payload[1]<0){if(y[2]>0){var A=e.text.filter((function(e){return e[2]===y[2]-1})),w=A[y[1]];void 0===w&&(w=A[A.length-1]),m=[e.marker[0],w[3]]}}else if(t.payload[1]>0&&y[2]<e.text[e.text.length-1][2]){var x=e.text.filter((function(e){return e[2]===y[2]+1})),_=x[y[1]];void 0===_&&(_=x[x.length-1])[3]===e.text.length-1&&(_[3]+=1),m=[e.marker[0],_[3]]}}return{text:e.text,marker:r(e.text,m)};case"set_marker":return{text:e.text,marker:r(e.text,t.payload)};case"set_end_marker":return{text:e.text,marker:r(e.text,[e.marker[0],t.payload])};case"layout":var k=b(t.col_num,e.text.map((function(e){return e[0]})).join(""));return{text:k,marker:r(k,e.marker)};case"move_marker":var S=e.marker;if(0!=t.payload[0]&&(S=[e.marker[0]+t.payload[0],e.marker[0]+t.payload[0]]),0!=t.payload[1]){var j=Math.min.apply(Math,h(e.marker)),C=U(e.text,j);if(t.payload[1]<0){if(C[2]>0){var E=e.text.filter((function(e){return e[2]===C[2]-1})),R=E[C[1]];void 0===R&&(R=E[E.length-1]),S=[R[3],R[3]]}}else if(t.payload[1]>0&&C[2]<e.text[e.text.length-1][2]){var O=e.text.filter((function(e){return e[2]===C[2]+1})),B=O[C[1]];void 0===B&&(B=O[O.length-1])[3]===e.text.length-1&&(B[3]+=1),S=[B[3],B[3]]}}return{text:e.text,marker:r(e.text,S)}}}var G;var q={text:b(40,G="Face lets you edit both the text and the font it is rendered in. In text mode you can type and edit text normally. Press escape to enter font mode, where you can select a character to edit. Any changes to a character are visible immediately.\n\nAdditional controls are shown at the bottom. You can change the text area and save it as an image in text mode. In font mode, you can save the font, load a font (fonts are just a sprite sheet image), or choose a font from the font gallery.\n\nThe base font used is a subset of GNU Unifont."),marker:[G.length,G.length]},K=95,V=12,Y=Math.ceil(K/V),J=8;t.default=function(){var e=Object(p.useState)("text"),t=e[0],r=e[1],n=Object(p.useRef)(null),a=Object(p.useRef)(null),o=Object(p.useRef)(null),l=Object(p.useRef)(null),s=Object(p.useRef)(null),u=Object(p.useRef)(null),f=Object(p.useState)(!1),d=f[0],m=f[1],g=Object(p.useState)(!1),b=g[0],w=g[1],x=Object(p.useState)(2),_=x[0],k=x[1],S=Object(p.useState)(16),j=S[0],C=S[1],R=Object(p.useState)(32),O=R[0],B=R[1],I=Object(p.useState)(40),M=I[0],D=I[1],N=Object(p.useState)(14),T=N[0],L=(N[1],Object(p.useState)(0)),G=L[0],Z=L[1],$=Object(p.useState)([0,0]),ee=$[0],te=$[1],re=Object(p.useRef)(null),ne=Object(p.useRef)(null),ie=Object(p.useRef)({}),ae=Object(p.useRef)(null),oe=Object(p.useRef)(null),le=Object(p.useRef)(null),se=Object(p.useState)(!1),ce=se[0],ue=se[1],fe=Object(p.useReducer)(H,q),he=fe[0],de=fe[1],ve=Object(p.useState)(0),pe=(ve[0],ve[1],Object(p.useState)(!0)),me=pe[0],ge=pe[1],ye=Object(p.useState)(A),be=ye[0],Ae=ye[1],we=Object(p.useState)(null),xe=we[0],_e=we[1],ke=Object(p.useState)(!1),Se=ke[0],je=ke[1];function Ce(e){var t=re.current,r=t.getContext("2d"),n=document.createElement("img");n.onload=function(){r.clearRect(0,0,t.width,t.height),r.fillStyle="white",r.fillRect(0,0,t.width,t.height),r.drawImage(n,0,0,t.width,t.height),Oe(),Me(),Be()},n.src=e,Ae(e)}function Ee(){var e=a.current;e.width=j*(M+2),e.height=O*(T+1);var t=n.current;t.width=j*(M+3),t.height=O*(T+1);var r=o.current;r.width=j*V,r.height=O*Y;var i=l.current;i.width=j*V,i.height=O*Y;var c=s.current;c.width=j*J,c.height=O*J;var f=u.current;f.width=c.width,f.height=c.height}function Re(){var e=l.current,r=e.getContext("2d");function n(e){return[e%V,Math.floor(e/V)]}r.clearRect(0,0,e.width,e.height);var i=c(n(G),2),a=i[0],o=i[1];r.fillStyle="#fff",r.lineWidth=_;var s=ae.current;s.width="font:-".length*X;var u=s.getContext("2d");u.globalCompositeOperation="source-over",u.fillStyle="#efefef",u.fillRect(0,0,s.width,s.height),u.globalCompositeOperation="darken";for(var f=0;f<"font ".length;f++){var h="font ".charCodeAt(f)-32;-22===h&&(h=94);var d=c(n(h),2),v=d[0],p=d[1];u.drawImage(ne.current,v*(j/_),p*(O/_),j/_,O/_,f*(j/_),O/_*0,j/_,O/_)}if("font"===t){r.fillRect(a*j,o*O,j,O);var m=c(function(e){return[e%V,Math.floor(e/V)]}(":".charCodeAt(0)-32),2),g=m[0],y=m[1];u.drawImage(ne.current,g*X,y*z,X,z,("font ".length-1)*X,0*z,X,z),u.drawImage(ne.current,a*X,o*z,X,z,"font ".length*X,0*z,X,z)}}function Oe(){var e=o.current,t=e.getContext("2d");t.imageSmoothingEnabled=!1,t.clearRect(0,0,e.width,e.height),t.drawImage(re.current,0,0,e.width,e.height)}function Be(){var e=u.current,r=e.getContext("2d");r.clearRect(0,0,e.width,e.height),"char"===t&&(r.fillStyle="magenta",r.fillRect(ee[0]*J,ee[1]*J,J*_,J*_));var n=s.current,i=n.getContext("2d");function a(e){return[e%V,Math.floor(e/V)]}i.fillStyle="white",i.fillRect(0,0,n.width,n.height),i.imageSmoothingEnabled=!1;var o=c(a(G),2),l=o[0],f=o[1];function a(e){return[e%V,Math.floor(e/V)]}i.drawImage(re.current,l*X,f*z,X,z,0,0,j*J,O*J);var h=oe.current;h.width="char:t".length*X;var d=h.getContext("2d");d.globalCompositeOperation="source-over",d.fillStyle="#efefef",d.fillRect(0,0,h.width,h.height),d.globalCompositeOperation="darken";for(var v=0;v<"char ".length;v++){var p="char ".charCodeAt(v)-32;-22===p&&(p=94);var m=c(a(p),2),g=m[0],y=m[1];d.drawImage(ne.current,g*(j/_),y*(O/_),j/_,O/_,v*(j/_),O/_*0,j/_,O/_)}if("char"===t){i.strokeStyle="#ddd";for(var b=0;b<O;b+=_)for(var A=0;A<j;A+=_)i.strokeRect(A*J,b*J,J*_,J*_);var w=c(function(e){return[e%V,Math.floor(e/V)]}(":".charCodeAt(0)-32),2),x=w[0],k=w[1];d.drawImage(ne.current,x*X,k*z,X,z,("char ".length-1)*X,0*z,X,z),d.drawImage(ne.current,l*X,f*z,X,z,"char ".length*X,0*z,X,z)}}function Ie(){var e=n.current,r=e.getContext("2d"),i=U(he.text,Math.max.apply(Math,h(he.marker).concat([he.text.length-1])));if(e.width=j*(M+3),e.height=i[2]*O+O+O,r.clearRect(0,0,e.width,e.height),"text"!=t&&me)for(var a=0;a<he.text.length;a++){var o=he.text[a],l=void 0;l=94===G?String.fromCharCode(10):String.fromCharCode(G+32),o[0]===l&&(r.fillStyle="#222",r.fillRect(o[1]*j+j+j/2,o[2]*O+O/2,j,O))}if("text"===t){var s=function(e){var t=U(he.text,e);return[t[1],t[2]]};if(he.marker[0]===he.marker[1]){var u=c(s(he.marker[0]),2),f=u[0],d=u[1];r.fillStyle="green",r.fillRect(f*j+j+j/2-_,d*O+O/2,2*_,O)}else{var v=Math.min.apply(Math,h(he.marker)),p=Math.max.apply(Math,h(he.marker)),m=c(s(v),2),g=m[0],y=m[1],b=c(s(p),2),A=b[0],w=b[1];if(r.fillStyle="green",y===w)r.fillRect(g*j+j+j/2,y*O+O/2,(A-g)*j,O);else{var x=he.text.filter((function(e){return e[2]===y})),k=x[x.length-1];if(r.fillRect(g*j+j+j/2,y*O+O/2,(k[1]-g+1)*j,O),w-y>1)for(var S=function(e){var t=he.text.filter((function(t){return t[2]===e}));r.fillRect(0*j+j+j/2,e*O+O/2,(t[t.length-1][1]+1)*j,O)},C=y+1;C<w;C++)S(C);var E=he.text.filter((function(e){return e[2]===w}));E[E.length-1];r.fillRect(0*j+j+j/2,w*O+O/2,A*j,O)}}}}function Me(){var e=a.current,t=e.getContext("2d"),r=he.text,n=U(he.text,Math.max(Math.max.apply(Math,h(he.marker)),he.text.length));function i(e){return[e%V,Math.floor(e/V)]}e.width=j*(M+2),e.height=n[2]*O+O+O;var o=le.current,l=o.getContext("2d");l.clearRect(0,0,o.width,o.height),l.globalCompositeOperation="source-over",l.fillStyle="#efefef",l.fillRect(0,0,o.width,o.height),l.globalCompositeOperation="darken";for(var s="text:"+M+"x"+(n[2]+1),u=0;u<s.length;u++){var f=s.charCodeAt(u)-32;-22===f&&(f=94);var d=c(i(f),2),v=d[0],p=d[1];l.drawImage(ne.current,v*(j/_),p*(O/_),j/_,O/_,u*(j/_),O/_*0,j/_,O/_)}t.fillStyle="white",t.fillRect(0,0,e.width,e.height),t.imageSmoothingEnabled=!1;for(var m=0;m<r.length;m++){var g=r[m],y=g[1],b=g[2],A=g[0].charCodeAt(0)-32;-22===A&&(A=94);var w=A%V,x=Math.floor(A/V);t.drawImage(re.current,w*X,x*z,X,z,y*j+j,b*O+O/2,j,O)}}function De(e){var t=!1;e.indexOf("ctrl")>-1&&(t=!0,e=e.split("+")[1]),ie.current[e]=!0,Ne(e,{shiftKey:!1,ctrlKey:t,meta:!1,preventDefault:function(){}}),setTimeout((function(){ie.current[e]=!1}),0)}function Ne(e,n){var l=ie.current,s=n.shiftKey,c=n.ctrlKey,u=n.metaKey;if(Se)if("Escape"===e)je((function(e){return!e}));else for(var f=0;f<Q.length;f++){if(e===Q[f]){var d=xe[Q.indexOf(e)];je(!1),Ce("/font-library/"+d)}}else{if(c&&1==e?(k(1),C(8),B(16),n.preventDefault()):c&&2==e?(k(2),C(16),B(32),n.preventDefault()):c&&"v"==e&&(location.href="https://github.com/constraint-systems/face",n.preventDefault()),"text"===t){if(c&&"a"===e)de({type:"set_marker",payload:[0,he.text.length]});else if(c&&"h"===e){var v=M-1;D(v),de({type:"layout",col_num:v}),n.preventDefault()}else if(c&&"l"===e){var p=M+1;D(p),de({type:"layout",col_num:p}),n.preventDefault()}else if(c&&"s"===e){var m=document.createElement("a"),g=a.current,y=document.createElement("canvas");y.width=g.width,y.height=g.height;var b=y.getContext("2d");b.fillStyle="white",b.fillRect(0,0,g.width,g.height),b.drawImage(g,0,0),y.toBlob((function(e){m.setAttribute("download","face-text-"+(new Date).toISOString().slice(0,-4).replace(/-/g,"").replace(/:/g,"").replace(/_/g,"").replace(/\./g,"")+"Z.png"),m.setAttribute("href",URL.createObjectURL(e)),m.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))})),n.preventDefault()}}else if(c&&"m"==e)ge((function(e){return!e})),n.preventDefault();else if(c&&"g"===e)je((function(e){return!e})),n.preventDefault();else if(c&&"d"===e){var A=document.createElement("a"),w=o.current,x=document.createElement("canvas");x.width=X*V*2,x.height=z*Y*2;var S=x.getContext("2d");S.imageSmoothingEnabled=!1,S.drawImage(w,0,0,x.width,x.height),x.toBlob((function(e){A.setAttribute("download","face-font-"+(new Date).toISOString().slice(0,-4).replace(/-/g,"").replace(/:/g,"").replace(/_/g,"").replace(/\./g,"")+"Z.png"),A.setAttribute("href",URL.createObjectURL(e)),A.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}))}else if(c&&"f"===e){var E=document.createElement("input");E.setAttribute("type","file"),E.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),E.addEventListener("change",(function e(t){var r=!0,n=!1,a=void 0;try{for(var o,l=i()(this.files);!(r=(o=l.next()).done);r=!0){var s=o.value;if(!(s.type.indexOf("image")<0))Ce(URL.createObjectURL(s))}}catch(c){n=!0,a=c}finally{try{r||null==l.return||l.return()}finally{if(n)throw a}}this.removeEventListener("change",e)})),n.preventDefault()}if(!c&&!u)if("text"===t)"Escape"===e?r("font"):"Backspace"===e?de({type:"backspace",col_num:M}):"ArrowLeft"===e?de(s?{type:"highlight",payload:[-1,0]}:{type:"move_marker",payload:[-1,0]}):"ArrowRight"===e?de(s?{type:"highlight",payload:[1,0]}:{type:"move_marker",payload:[1,0]}):"ArrowUp"===e?de(s?{type:"highlight",payload:[0,-1]}:{type:"move_marker",payload:[0,-1]}):"ArrowDown"===e?de(s?{type:"highlight",payload:[0,1]}:{type:"move_marker",payload:[0,1]}):1===e.length?(de({type:"insert",col_num:M,payload:e})," "===e&&n.preventDefault()):"Enter"===e&&de({type:"insert",col_num:M,payload:"\n"});else if("font"===t){if("Enter"===e?r("char"):"t"===e&&r("text"),l.l||l.ArrowRight){var R=G+1;R>K-1&&(R=K-1),Z(R)}if(l.h||l.ArrowLeft){var I=G-1;I<0&&(I=0),Z(I)}if(l.j||l.k||l.ArrowDown||l.ArrowUp){var N=h(Array(K)).map((function(e,t){return[t,t%V,Math.floor(t/V)]})),F=N[G];if(l.k||l.ArrowUp){var T=F[2]-1;if(T>=0){var L=N.filter((function(e){return e[2]===T})),P=L[F[1]];void 0===P&&L[L.length-1],Z(P[0])}}if(l.j||l.ArrowDown){var W=F[2]+1;if(W<=N[N.length-1][2]){var U=N.filter((function(e){return e[2]===W})),H=U[F[1]];void 0===H&&(H=U[U.length-1]),Z(H[0])}}}}else if("char"===t){"Escape"===e&&r("font");var q=[0,0];(l.j||l.ArrowDown)&&(q[1]+=1*_),(l.k||l.ArrowUp)&&(q[1]-=1*_),(l.h||l.ArrowLeft)&&(q[0]-=1*_),(l.l||l.ArrowRight)&&(q[0]+=1*_);var J=[ee[0]+q[0],ee[1]+q[1]];J[0]<0&&(J[0]=0),J[0]>j-_&&(J[0]=j-_),J[1]<0&&(J[1]=0),J[1]>O-_&&(J[1]=O-_),te(J),l.d?Fe("black",J):l.e&&Fe("white",J)}}}function Fe(e,t){var r=re.current.getContext("2d"),n=G,i=n%V,a=Math.floor(n/V);"white"===e?(r.fillStyle="white",r.fillRect(i*X+t[0]/_,a*z+t[1]/_,1,1)):(r.fillStyle="black",r.fillRect(i*X+t[0]/_,a*z+t[1]/_,1,1)),Oe(),Be(),Me()}function Te(e){var t=he.text.map((function(e){return e[0]})).join(""),r=Math.min.apply(Math,h(he.marker)),n=Math.max.apply(Math,h(he.marker)),i=t.substr(r,n);e.clipboardData.setData("text/plain",i),event.preventDefault()}function Le(e){var t=he.text.map((function(e){return e[0]})).join(""),r=Math.min.apply(Math,h(he.marker)),n=Math.max.apply(Math,h(he.marker)),i=t.substr(r,n);e.clipboardData.setData("text/plain",i),de({type:"insert",col_num:M,payload:""}),event.preventDefault()}function Pe(e){var t=(event.clipboardData||window.clipboardData).getData("text");de({type:"insert",col_num:M,payload:t}),event.preventDefault()}function We(e){ie.current[e.key]=!0,Ne(e.key,e)}function Xe(e){ie.current[e.key]=!1}Object(p.useEffect)((function(){fetch("/library.json").then((function(e){return e.json()})).then((function(e){_e(e)}))}),[]),Object(p.useEffect)((function(){if(8===j&&16===O&&1===_||16===j&&32===O&&2===_){Ee();var e=document.createElement("canvas");e.width=V*(j/_),e.height=Y*(O/_);var t=e.getContext("2d");t.imageSmoothingEnabled=!1;var r=document.createElement("img");r.onload=function(){t.fillStyle="white",t.fillRect(0,0,e.width,e.height),t.drawImage(r,0,0,e.width,e.height),re.current=e,m(!0)},r.src=be;var n=document.createElement("img");n.onload=function(){var e=document.createElement("canvas");e.width=V*j/_,e.height=Y*O/_;var t=e.getContext("2d");t.imageSmoothingEnabled=!1,t.drawImage(n,0,0,e.width,e.height),ne.current=e,w(!0)},n.src=A}}),[]),Object(p.useEffect)((function(){d&&(Ee(),Ie(),Me(),Oe(),Re(),Be())}),[j,O,_,d]),Object(p.useEffect)((function(){d&&(Ie(),Me(),Oe(),Re(),Be())}),[d]),Object(p.useEffect)((function(){d&&(Ie(),Re())}),[t,he.text,he.marker,G,M,me]),Object(p.useEffect)((function(){d&&Be()}),[t,G,ee]),Object(p.useEffect)((function(){d&&Me()}),[he.text,M]),Object(p.useEffect)((function(){return window.addEventListener("keydown",We),window.addEventListener("keyup",Xe),window.addEventListener("copy",Te),window.addEventListener("cut",Le),window.addEventListener("paste",Pe),function(){window.removeEventListener("keydown",We),window.removeEventListener("keyup",Xe),window.removeEventListener("copy",Te),window.removeEventListener("cut",Le),window.removeEventListener("paste",Pe)}}),[t,M,he,G,ee,Se]);var ze=j/_,Qe=O/_,Ue="Face lets you edit both the text and the font it is rendered in.";return W("div",{className:"jsx-3625601830"},W(y.a,null,W("meta",{charset:"UTF-8",className:"jsx-3625601830"}),W("title",{className:"jsx-3625601830"},"Face"),W("link",{rel:"shortcut icon",href:"/favicon.png",className:"jsx-3625601830"}),W("meta",{name:"viewport",content:"width=device-width,initial-scale=1,shrink-to-fit=no",className:"jsx-3625601830"}),W("meta",{name:"theme-color",content:"#000000",className:"jsx-3625601830"}),W("title",{className:"jsx-3625601830"},"Face"),W("meta",{name:"description",content:Ue,className:"jsx-3625601830"}),W("meta",{property:"og:title",content:"Face",className:"jsx-3625601830"}),W("meta",{property:"og:description",content:Ue,className:"jsx-3625601830"}),W("meta",{property:"og:image",content:"https://face.constraint.systems/face.png",className:"jsx-3625601830"}),W("meta",{property:"og:url",content:"https://face.constraint.systems",className:"jsx-3625601830"}),W("meta",{name:"twitter:card",content:"summary_large_image",className:"jsx-3625601830"})),W(E,{cw:ze,ch:Qe,scale:_,base:ne.current,ui_loaded:b,mode:t,keyTrigger:De}),W("div",{style:{display:"flex",marginTop:Qe/2,marginBottom:Qe/2},className:"jsx-3625601830"},W("div",{style:{position:"relative",marginRight:j},className:"jsx-3625601830"},W("canvas",{width:"font".length*ze,height:Qe,ref:ae,className:"jsx-3625601830"}),W("div",{onMouseDown:function(){r("font")},style:{position:"relative"},className:"jsx-3625601830"},W("canvas",{ref:o,style:{position:"relative",outline:"font"===t?"solid 1px black":"none"},className:"jsx-3625601830"}),W("canvas",{style:{position:"absolute",mixBlendMode:"difference",left:0,top:0},ref:l,className:"jsx-3625601830"}))),W("div",{style:{position:"relative"},className:"jsx-3625601830"},W("div",{style:{position:"relative"},className:"jsx-3625601830"},W("canvas",{width:"char".length*ze,height:O/_,ref:oe,className:"jsx-3625601830"})),W("div",{style:{position:"relative"},className:"jsx-3625601830"},W("canvas",{ref:s,style:{position:"relative",outline:"char"===t?"solid 1px black":"none"},className:"jsx-3625601830"}),W("canvas",{style:{position:"absolute",left:0,top:0},ref:u,className:"jsx-3625601830"})))),W("div",{style:{position:"relative",marginBottom:2*Qe},className:"jsx-3625601830"},W("div",{style:{position:"relative"},className:"jsx-3625601830"},W("canvas",{width:"text 100x100".length*j/_,height:Qe,ref:le,className:"jsx-3625601830"})),W("div",{style:{position:"relative"},className:"jsx-3625601830"},W("canvas",{style:{position:"relative",outline:"text"===t?"solid 1px black":"none"},ref:a,className:"jsx-3625601830"}),W("canvas",{style:{mixBlendMode:"difference",position:"absolute",left:-j/2,top:0},onMouseDown:function(e){r("text");var t,n=e.target.getBoundingClientRect(),i=e.clientX-n.left-j,a=e.clientY-n.top,o=Math.floor(a/O),l=Math.round(i/j),s=he.text.filter((function(e){return e[2]===o}));if(0===s.length)t=he.text.length;else{var c=s[l];void 0===c&&(c=s[s.length-1]),t=c[3]}de({type:"set_marker",payload:[t,t]}),ue(!0)},onMouseUp:function(e){var t,r=e.target.getBoundingClientRect(),n=e.clientX-r.left-j,i=e.clientY-r.top,a=Math.floor(i/O),o=Math.round(n/j),l=he.text.filter((function(e){return e[2]===a}));if(0===l.length)t=he.text.length;else{var s=l[o];void 0===s&&(s=l[l.length-1]),t=s[3]}de({type:"set_end_marker",payload:t}),ue(!1)},onMouseMove:function(e){if(ce){var t,r=e.target.getBoundingClientRect(),n=e.clientX-r.left-j,i=e.clientY-r.top,a=Math.floor(i/O),o=Math.round(n/j),l=he.text.filter((function(e){return e[2]===a}));if(0===l.length)t=he.text.length;else{var s=l[o];void 0===s&&(s=l[l.length-1]),t=s[3]}de({type:"set_end_marker",payload:t})}},ref:n,className:"jsx-3625601830"}))),W(F,{cw:X,ch:z,base:ne.current,scale:_,ui_loaded:b,highlight:me,mode:t,keyTrigger:De}),Se?W("div",{style:{position:"fixed",left:0,top:0,right:0,bottom:0,overflow:"auto",background:"rgba(220,220,220,0.8)"},className:"jsx-3625601830"},W("div",{style:{background:"#efefef",outline:"solid 1px black",overflow:"hidden"},className:"jsx-3625601830"},W("div",{style:{marginBottom:z},className:"jsx-3625601830"},W(P,{base:ne.current,ui_loaded:b,keyTrigger:De,max_width:window.innerWidth,content:[{type:"text",content:"font gallery:"},{type:"button",key:"Escape",key_label:"Esc",label:"exit"}]})),xe.map((function(e,t){return W("div",{style:{float:"left",marginRight:2*X,marginBottom:z},className:"jsx-3625601830"},W("img",{src:"/font-library/"+e,className:"jsx-3625601830"}),W(P,{base:ne.current,ui_loaded:b,keyTrigger:De,max_width:V*j,content:[{type:"button",key:Q[t],key_label:Q[t],label:e}]}))})))):null,W(v.a,{id:"3625601830"},["html{background:#efefef;line-height:0;}","body{padding:0;margin:0;}","img{display:block;}"]))}},"RRc/":function(e,t,r){var n=r("oioR");e.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},SevZ:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=a(r("9kyW")),i=a(r("bVZc"));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(e){var t=void 0===e?{}:e,r=t.styleSheet,n=void 0===r?null:r,a=t.optimizeForSpeed,o=void 0!==a&&a,l=t.isBrowser,s=void 0===l?"undefined"!==typeof window:l;this._sheet=n||new i.default({name:"styled-jsx",optimizeForSpeed:o}),this._sheet.inject(),n&&"boolean"===typeof o&&(this._sheet.setOptimizeForSpeed(o),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._isBrowser=s,this._fromServer=void 0,this._indices={},this._instancesCounts={},this.computeId=this.createComputeId(),this.computeSelector=this.createComputeSelector()}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._isBrowser&&!this._fromServer&&(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce((function(e,t){return e[t]=0,e}),{}));var r=this.getIdAndRules(e),n=r.styleId,i=r.rules;if(n in this._instancesCounts)this._instancesCounts[n]+=1;else{var a=i.map((function(e){return t._sheet.insertRule(e)})).filter((function(e){return-1!==e}));this._indices[n]=a,this._instancesCounts[n]=1}},t.remove=function(e){var t=this,r=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw new Error("StyleSheetRegistry: "+t+".")}(r in this._instancesCounts,"styleId: `"+r+"` not found"),this._instancesCounts[r]-=1,this._instancesCounts[r]<1){var n=this._fromServer&&this._fromServer[r];n?(n.parentNode.removeChild(n),delete this._fromServer[r]):(this._indices[r].forEach((function(e){return t._sheet.deleteRule(e)})),delete this._indices[r]),delete this._instancesCounts[r]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={},this.computeId=this.createComputeId(),this.computeSelector=this.createComputeSelector()},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map((function(t){return[t,e._fromServer[t]]})):[],r=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map((function(t){return[t,e._indices[t].map((function(e){return r[e].cssText})).join(e._optimizeForSpeed?"":"\n")]})).filter((function(e){return Boolean(e[1])})))},t.createComputeId=function(){var e={};return function(t,r){if(!r)return"jsx-"+t;var i=String(r),a=t+i;return e[a]||(e[a]="jsx-"+(0,n.default)(t+"-"+i)),e[a]}},t.createComputeSelector=function(e){void 0===e&&(e=/__jsx-style-dynamic-selector/g);var t={};return function(r,n){this._isBrowser||(n=n.replace(/\/style/gi,"\\/style"));var i=r+n;return t[i]||(t[i]=n.replace(e,r)),t[i]}},t.getIdAndRules=function(e){var t=this,r=e.children,n=e.dynamic,i=e.id;if(n){var a=this.computeId(i,n);return{styleId:a,rules:Array.isArray(r)?r.map((function(e){return t.computeSelector(a,e)})):[this.computeSelector(a,r)]}}return{styleId:this.computeId(i),rules:Array.isArray(r)?r:[r]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce((function(e,t){return e[t.id.slice(2)]=t,e}),{})},e}();t.default=o},TbGu:function(e,t,r){var n=r("fGSI"),i=r("PQJW"),a=r("2PDY");e.exports=function(e){return n(e)||i(e)||a()}},"V+O7":function(e,t,r){r("aPfg")("Set")},VJsP:function(e,t,r){"use strict";var n=r("2GTP"),i=r("Y7ZC"),a=r("JB68"),o=r("sNwI"),l=r("NwJ3"),s=r("tEej"),c=r("IP1Z"),u=r("fNZA");i(i.S+i.F*!r("TuGD")((function(e){Array.from(e)})),"Array",{from:function(e){var t,r,i,f,h=a(e),d="function"==typeof this?this:Array,v=arguments.length,p=v>1?arguments[1]:void 0,m=void 0!==p,g=0,y=u(h);if(m&&(p=n(p,v>2?arguments[2]:void 0,2)),void 0==y||d==Array&&l(y))for(r=new d(t=s(h.length));t>g;g++)c(r,g,m?p(h[g],g):h[g]);else for(f=y.call(h),r=new d;!(i=f.next()).done;g++)c(r,g,m?o(f,p,[i.value,g],!0):i.value);return r.length=g,r}})},Wu5q:function(e,t,r){"use strict";var n=r("2faE").f,i=r("oVml"),a=r("XJU/"),o=r("2GTP"),l=r("EXMj"),s=r("oioR"),c=r("MPFp"),u=r("UO39"),f=r("TJWN"),h=r("jmDH"),d=r("6/1s").fastKey,v=r("n3ko"),p=h?"_s":"size",m=function(e,t){var r,n=d(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,c){var u=e((function(e,n){l(e,u,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[p]=0,void 0!=n&&s(n,r,e[c],e)}));return a(u.prototype,{clear:function(){for(var e=v(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[p]=0},delete:function(e){var r=v(this,t),n=m(r,e);if(n){var i=n.n,a=n.p;delete r._i[n.i],n.r=!0,a&&(a.n=i),i&&(i.p=a),r._f==n&&(r._f=i),r._l==n&&(r._l=a),r[p]--}return!!n},forEach:function(e){v(this,t);for(var r,n=o(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!m(v(this,t),e)}}),h&&n(u.prototype,"size",{get:function(){return v(this,t)[p]}}),u},def:function(e,t,r){var n,i,a=m(e,t);return a?a.v=r:(e._l=a={i:i=d(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=a),n&&(n.n=a),e[p]++,"F"!==i&&(e._i[i]=a)),e},getEntry:m,setStrong:function(e,t,r){c(e,t,(function(e,r){this._t=v(e,t),this._k=r,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?u(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,u(1))}),r?"entries":"values",!r,!0),f(t)}}},Xuae:function(e,t,r){"use strict";var n=r("/HRN"),i=r("ZDA2"),a=r("/+P4"),o=r("K47E"),l=r("WaGi"),s=r("N9n2"),c=r("TbGu"),u=r("ttDY");r("hfKm")(t,"__esModule",{value:!0});var f=r("q1tI"),h=!1;t.default=function(){var e,t=new u;function r(r){e=r.props.reduceComponentsToState(c(t),r.props),r.props.handleStateChange&&r.props.handleStateChange(e)}return function(c){function u(e){var l;return n(this,u),l=i(this,a(u).call(this,e)),h&&(t.add(o(l)),r(o(l))),l}return s(u,c),l(u,null,[{key:"rewind",value:function(){var r=e;return e=void 0,t.clear(),r}}]),l(u,[{key:"componentDidMount",value:function(){t.add(this),r(this)}},{key:"componentDidUpdate",value:function(){r(this)}},{key:"componentWillUnmount",value:function(){t.delete(this),r(this)}},{key:"render",value:function(){return null}}]),u}(f.Component)}},bVZc:function(e,t,r){"use strict";(function(e){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.__esModule=!0,t.default=void 0;var n="undefined"!==typeof e&&e.env&&!0,i=function(e){return"[object String]"===Object.prototype.toString.call(e)},a=function(){function e(e){var t=void 0===e?{}:e,r=t.name,a=void 0===r?"stylesheet":r,l=t.optimizeForSpeed,s=void 0===l?n:l,c=t.isBrowser,u=void 0===c?"undefined"!==typeof window:c;o(i(a),"`name` must be a string"),this._name=a,this._deletedRulePlaceholder="#"+a+"-deleted-rule____{}",o("boolean"===typeof s,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=s,this._isBrowser=u,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var f=this._isBrowser&&document.querySelector('meta[property="csp-nonce"]');this._nonce=f?f.getAttribute("content"):null}var t,a,l,s=e.prototype;return s.setOptimizeForSpeed=function(e){o("boolean"===typeof e,"`setOptimizeForSpeed` accepts a boolean"),o(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},s.isOptimizeForSpeed=function(){return this._optimizeForSpeed},s.inject=function(){var e=this;if(o(!this._injected,"sheet already injected"),this._injected=!0,this._isBrowser&&this._optimizeForSpeed)return this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),void(this._optimizeForSpeed||(n||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0));this._serverSheet={cssRules:[],insertRule:function(t,r){return"number"===typeof r?e._serverSheet.cssRules[r]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),r},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},s.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},s.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},s.insertRule=function(e,t){if(o(i(e),"`insertRule` accepts only strings"),!this._isBrowser)return"number"!==typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var r=this.getSheet();"number"!==typeof t&&(t=r.cssRules.length);try{r.insertRule(e,t)}catch(l){return n||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var a=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,a))}return this._rulesCount++},s.replaceRule=function(e,t){if(this._optimizeForSpeed||!this._isBrowser){var r=this._isBrowser?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!r.cssRules[e])return e;r.deleteRule(e);try{r.insertRule(t,e)}catch(a){n||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),r.insertRule(this._deletedRulePlaceholder,e)}}else{var i=this._tags[e];o(i,"old rule at index `"+e+"` not found"),i.textContent=t}return e},s.deleteRule=function(e){if(this._isBrowser)if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];o(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}else this._serverSheet.deleteRule(e)},s.flush=function(){this._injected=!1,this._rulesCount=0,this._isBrowser?(this._tags.forEach((function(e){return e&&e.parentNode.removeChild(e)})),this._tags=[]):this._serverSheet.cssRules=[]},s.cssRules=function(){var e=this;return this._isBrowser?this._tags.reduce((function(t,r){return r?t=t.concat(Array.prototype.map.call(e.getSheetForTag(r).cssRules,(function(t){return t.cssText===e._deletedRulePlaceholder?null:t}))):t.push(null),t}),[]):this._serverSheet.cssRules},s.makeStyleTag=function(e,t,r){t&&o(i(t),"makeStyleTag acceps only strings as second parameter");var n=document.createElement("style");this._nonce&&n.setAttribute("nonce",this._nonce),n.type="text/css",n.setAttribute("data-"+e,""),t&&n.appendChild(document.createTextNode(t));var a=document.head||document.getElementsByTagName("head")[0];return r?a.insertBefore(n,r):a.appendChild(n),n},t=e,(a=[{key:"length",get:function(){return this._rulesCount}}])&&r(t.prototype,a),l&&r(t,l),e}();function o(e,t){if(!e)throw new Error("StyleSheet: "+t+".")}t.default=a}).call(this,r("8oxB"))},d04V:function(e,t,r){e.exports=r("0tVQ")},dL40:function(e,t,r){var n=r("Y7ZC");n(n.P+n.R,"Set",{toJSON:r("8iia")("Set")})},fGSI:function(e,t,r){var n=r("p0XB");e.exports=function(e){if(n(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}},lwAK:function(e,t,r){"use strict";var n=r("hfKm"),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};n(t,"__esModule",{value:!0});var a=i(r("q1tI"));t.AmpStateContext=a.createContext({})},ttDY:function(e,t,r){e.exports=r("+iuc")},vlRD:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r("RNiq")}])},xvv9:function(e,t,r){r("cHUd")("Set")}},[["vlRD",1,2,0]]]);